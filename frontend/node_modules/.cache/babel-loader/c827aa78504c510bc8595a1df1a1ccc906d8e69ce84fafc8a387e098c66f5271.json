{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{motion,AnimatePresence}from'framer-motion';import{Users,Search,Phone,Mail,User,Clock,CheckCircle,XCircle,AlertCircle}from'lucide-react';import API from'../utils/api';import RequirementForm from'./RequirementForm';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ContactList(_ref){let{refreshTrigger,onDataChange}=_ref;const[contacts,setContacts]=useState([]);const[selected,setSelected]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[filterStatus,setFilterStatus]=useState('all');const[loading,setLoading]=useState(true);const didInitRef=useRef(false);const load=async showSpinner=>{if(showSpinner)setLoading(true);try{const res=await API.get('/contacts');setContacts(res.data);}catch(err){console.error('Error loading contacts:',err);}finally{if(showSpinner)setLoading(false);}};useEffect(()=>{if(!didInitRef.current){didInitRef.current=true;load(true);}else{load(false);}},[refreshTrigger]);const filteredContacts=contacts.filter(c=>{var _c$name,_c$email,_c$company,_c$latest_log,_c$latest_log2;const matchesSearch=((_c$name=c.name)===null||_c$name===void 0?void 0:_c$name.toLowerCase().includes(searchTerm.toLowerCase()))||((_c$email=c.email)===null||_c$email===void 0?void 0:_c$email.toLowerCase().includes(searchTerm.toLowerCase()))||((_c$company=c.company)===null||_c$company===void 0?void 0:_c$company.toLowerCase().includes(searchTerm.toLowerCase()));const matchesFilter=filterStatus==='all'||filterStatus==='contacted'&&c.latest_log||filterStatus==='not_contacted'&&!c.latest_log||filterStatus==='has_requirement'&&((_c$latest_log=c.latest_log)===null||_c$latest_log===void 0?void 0:_c$latest_log.response)==='yes'||filterStatus==='no_requirement'&&((_c$latest_log2=c.latest_log)===null||_c$latest_log2===void 0?void 0:_c$latest_log2.response)==='no';return matchesSearch&&matchesFilter;});const getStatusBadge=contact=>{if(!contact.latest_log){return/*#__PURE__*/_jsx(\"span\",{className:\"badge-warning\",children:\"Not Contacted\"});}if(contact.latest_log.response==='yes'){return/*#__PURE__*/_jsx(\"span\",{className:\"badge-success\",children:\"Has Requirement\"});}if(contact.latest_log.response==='no'){return/*#__PURE__*/_jsx(\"span\",{className:\"badge-danger\",children:\"No Requirement\"});}return/*#__PURE__*/_jsx(\"span\",{className:\"badge-info\",children:\"Pending\"});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white/90 backdrop-blur-sm rounded-xl border border-gray-100 shadow-lg overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-400 to-purple-400 p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/30 backdrop-blur-sm rounded-xl p-2.5\",children:/*#__PURE__*/_jsx(Users,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-white text-lg font-bold\",children:\"Contact Management\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white/80 text-sm\",children:[filteredContacts.length,\" total contacts\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name, email, or company...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-12 pr-4 py-2.5 bg-white/95 backdrop-blur-sm border border-white/30 rounded-xl shadow-sm focus:bg-white focus:outline-none focus:ring-2 focus:ring-white/50 transition-all\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-gray-50/80 to-blue-50/50 p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1 h-5 bg-gradient-to-b from-purple-400 to-purple-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-sm font-medium\",children:\"Filter by Category\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 flex-wrap\",children:['all','contacted','not_contacted','has_requirement','no_requirement'].map(status=>/*#__PURE__*/_jsx(motion.button,{onClick:()=>setFilterStatus(status),whileHover:{scale:1.02},whileTap:{scale:0.98},className:\"px-5 py-2.5 rounded-xl transition-all duration-200 text-sm font-medium \".concat(filterStatus===status?'bg-gradient-to-r from-blue-400 to-purple-400 text-white shadow-md shadow-blue-400/30 scale-105':'bg-white text-gray-500 hover:bg-gray-50 border border-gray-100 hover:border-blue-200 hover:shadow-sm'),children:status.replace('_',' ').replace(/\\b\\w/g,l=>l.toUpperCase())},status))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 bg-white border-b border-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1 h-5 bg-gradient-to-b from-blue-400 to-blue-500 rounded-full\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 text-sm\",children:[filteredContacts.length,\" Contact\",filteredContacts.length!==1?'s':'',\" Found\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 mt-4\",children:\"Loading contacts...\"})]}):filteredContacts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-16 h-16 text-slate-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500\",children:\"No contacts found\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto max-h-[calc(100vh-450px)] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gradient-to-r from-gray-50/80 to-blue-50/60 sticky top-0 z-10\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Last Contacted\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Contacted By\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Follow-up Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-semibold text-gray-600\",children:\"Notes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredContacts.map((c,index)=>{var _c$latest_log3,_c$latest_log4,_c$latest_log5;const formatDate=dateString=>{if(!dateString)return'-';return new Date(dateString).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});};const isUpcoming=dateString=>{if(!dateString)return false;const date=new Date(dateString);const today=new Date();const threeDays=new Date();threeDays.setDate(today.getDate()+3);return date>=today&&date<=threeDays;};return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-100 hover:bg-gradient-to-r hover:from-blue-50/40 hover:to-indigo-50/30 transition-colors cursor-pointer \".concat(index%2===0?'bg-white':'bg-gray-50/30'),onClick:()=>setSelected(c),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm font-medium text-gray-900\",children:c.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-600\",children:c.email||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-600\",children:c.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm\",children:c.latest_log?/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700 border border-emerald-200\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3 mr-1\"}),\"Contacted\"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200\",children:[/*#__PURE__*/_jsx(XCircle,{className:\"w-3 h-3 mr-1\"}),\"Not Contacted\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-600\",children:c.latest_log?formatDate(c.latest_log.contacted_at):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-600\",children:(_c$latest_log3=c.latest_log)!==null&&_c$latest_log3!==void 0&&_c$latest_log3.contacted_by?/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600\",children:c.latest_log.contacted_by}):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm\",children:(_c$latest_log4=c.latest_log)!==null&&_c$latest_log4!==void 0&&_c$latest_log4.follow_up_date?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5 px-2.5 py-1 rounded-lg \".concat(isUpcoming(c.latest_log.follow_up_date)?'bg-orange-50 border border-orange-200':'bg-gray-50'),children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3.5 h-3.5 \".concat(isUpcoming(c.latest_log.follow_up_date)?'text-orange-500':'text-gray-400')}),/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(isUpcoming(c.latest_log.follow_up_date)?'text-orange-600 font-medium':'text-gray-600'),children:formatDate(c.latest_log.follow_up_date)})]}):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-600 max-w-xs\",children:(_c$latest_log5=c.latest_log)!==null&&_c$latest_log5!==void 0&&_c$latest_log5.notes?/*#__PURE__*/_jsxs(\"div\",{className:\"truncate italic text-xs bg-blue-50/50 px-2 py-1 rounded\",title:c.latest_log.notes,children:[\"\\\"\",c.latest_log.notes,\"\\\"\"]}):'-'})]},c.id);})})]})})})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:selected&&/*#__PURE__*/_jsx(RequirementForm,{contact:selected,onDone:()=>{setSelected(null);load();if(onDataChange)onDataChange();}})})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","motion","AnimatePresence","Users","Search","Phone","Mail","User","Clock","CheckCircle","XCircle","AlertCircle","API","RequirementForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ContactList","_ref","refreshTrigger","onDataChange","contacts","setContacts","selected","setSelected","searchTerm","setSearchTerm","filterStatus","setFilterStatus","loading","setLoading","didInitRef","load","showSpinner","res","get","data","err","console","error","current","filteredContacts","filter","c","_c$name","_c$email","_c$company","_c$latest_log","_c$latest_log2","matchesSearch","name","toLowerCase","includes","email","company","matchesFilter","latest_log","response","getStatusBadge","contact","className","children","div","initial","opacity","y","animate","length","type","placeholder","value","onChange","e","target","map","status","button","onClick","whileHover","scale","whileTap","concat","replace","l","toUpperCase","index","_c$latest_log3","_c$latest_log4","_c$latest_log5","formatDate","dateString","Date","toLocaleDateString","month","day","year","isUpcoming","date","today","threeDays","setDate","getDate","phone","contacted_at","contacted_by","follow_up_date","notes","title","id","onDone"],"sources":["C:/Users/Sahithi/Desktop/JR Tracker/frontend/src/components/ContactList.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Users, Search, Phone, Mail, User, Clock, CheckCircle, XCircle, AlertCircle } from 'lucide-react';\nimport API from '../utils/api';\nimport RequirementForm from './RequirementForm';\n\nexport default function ContactList({ refreshTrigger, onDataChange }) {\n  const [contacts, setContacts] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const didInitRef = useRef(false);\n\n  const load = async (showSpinner) => {\n    if (showSpinner) setLoading(true);\n    try {\n      const res = await API.get('/contacts');\n      setContacts(res.data);\n    } catch (err) {\n      console.error('Error loading contacts:', err);\n    } finally {\n      if (showSpinner) setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!didInitRef.current) {\n      didInitRef.current = true;\n      load(true);\n    } else {\n      load(false);\n    }\n  }, [refreshTrigger]);\n\n  const filteredContacts = contacts.filter((c) => {\n    const matchesSearch =\n      c.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      c.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      c.company?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesFilter =\n      filterStatus === 'all' ||\n      (filterStatus === 'contacted' && c.latest_log) ||\n      (filterStatus === 'not_contacted' && !c.latest_log) ||\n      (filterStatus === 'has_requirement' && c.latest_log?.response === 'yes') ||\n      (filterStatus === 'no_requirement' && c.latest_log?.response === 'no');\n\n    return matchesSearch && matchesFilter;\n  });\n\n  const getStatusBadge = (contact) => {\n    if (!contact.latest_log) {\n      return <span className=\"badge-warning\">Not Contacted</span>;\n    }\n    if (contact.latest_log.response === 'yes') {\n      return <span className=\"badge-success\">Has Requirement</span>;\n    }\n    if (contact.latest_log.response === 'no') {\n      return <span className=\"badge-danger\">No Requirement</span>;\n    }\n    return <span className=\"badge-info\">Pending</span>;\n  };\n\n  return (\n    <>\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"bg-white/90 backdrop-blur-sm rounded-xl border border-gray-100 shadow-lg overflow-hidden\"\n      >\n        {/* Header with Gradient */}\n        <div className=\"bg-gradient-to-r from-blue-400 to-purple-400 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"bg-white/30 backdrop-blur-sm rounded-xl p-2.5\">\n                <Users className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <h2 className=\"text-white text-lg font-bold\">Contact Management</h2>\n                <p className=\"text-white/80 text-sm\">{filteredContacts.length} total contacts</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Search Bar */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search by name, email, or company...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-12 pr-4 py-2.5 bg-white/95 backdrop-blur-sm border border-white/30 rounded-xl shadow-sm focus:bg-white focus:outline-none focus:ring-2 focus:ring-white/50 transition-all\"\n            />\n          </div>\n        </div>\n\n        {/* Filter Section */}\n        <div className=\"bg-gradient-to-r from-gray-50/80 to-blue-50/50 p-6 border-b border-gray-100\">\n          <div className=\"flex items-center gap-2 mb-3\">\n            <div className=\"w-1 h-5 bg-gradient-to-b from-purple-400 to-purple-500 rounded-full\"></div>\n            <span className=\"text-gray-500 text-sm font-medium\">Filter by Category</span>\n          </div>\n          <div className=\"flex gap-2 flex-wrap\">\n            {['all', 'contacted', 'not_contacted', 'has_requirement', 'no_requirement'].map((status) => (\n              <motion.button\n                key={status}\n                onClick={() => setFilterStatus(status)}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className={`px-5 py-2.5 rounded-xl transition-all duration-200 text-sm font-medium ${\n                  filterStatus === status\n                    ? 'bg-gradient-to-r from-blue-400 to-purple-400 text-white shadow-md shadow-blue-400/30 scale-105'\n                    : 'bg-white text-gray-500 hover:bg-gray-50 border border-gray-100 hover:border-blue-200 hover:shadow-sm'\n                }`}\n              >\n                {status.replace('_', ' ').replace(/\\b\\w/g, (l) => l.toUpperCase())}\n              </motion.button>\n            ))}\n          </div>\n        </div>\n\n        {/* Contacts Table Header */}\n        <div className=\"p-6 bg-white border-b border-gray-100\">\n          <div className=\"flex items-center gap-2 mb-4\">\n            <div className=\"w-1 h-5 bg-gradient-to-b from-blue-400 to-blue-500 rounded-full\"></div>\n            <span className=\"text-gray-500 text-sm\">\n              {filteredContacts.length} Contact{filteredContacts.length !== 1 ? 's' : ''} Found\n            </span>\n          </div>\n        </div>\n\n        {/* Contacts Table */}\n        <div className=\"overflow-hidden\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto\"></div>\n              <p className=\"text-slate-500 mt-4\">Loading contacts...</p>\n            </div>\n          ) : filteredContacts.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Users className=\"w-16 h-16 text-slate-300 mx-auto mb-4\" />\n              <p className=\"text-slate-500\">No contacts found</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto max-h-[calc(100vh-450px)] overflow-y-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gradient-to-r from-gray-50/80 to-blue-50/60 sticky top-0 z-10\">\n                  <tr className=\"border-b border-gray-200\">\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Name</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Email</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Phone</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Status</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Last Contacted</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Contacted By</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Follow-up Date</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600\">Notes</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredContacts.map((c, index) => {\n                    const formatDate = (dateString) => {\n                      if (!dateString) return '-';\n                      return new Date(dateString).toLocaleDateString('en-US', {\n                        month: 'short',\n                        day: 'numeric',\n                        year: 'numeric'\n                      });\n                    };\n\n                    const isUpcoming = (dateString) => {\n                      if (!dateString) return false;\n                      const date = new Date(dateString);\n                      const today = new Date();\n                      const threeDays = new Date();\n                      threeDays.setDate(today.getDate() + 3);\n                      return date >= today && date <= threeDays;\n                    };\n\n                    return (\n                      <tr\n                        key={c.id}\n                        className={`border-b border-gray-100 hover:bg-gradient-to-r hover:from-blue-50/40 hover:to-indigo-50/30 transition-colors cursor-pointer ${\n                          index % 2 === 0 ? 'bg-white' : 'bg-gray-50/30'\n                        }`}\n                        onClick={() => setSelected(c)}\n                      >\n                        {/* Name */}\n                        <td className=\"px-4 py-3 text-sm font-medium text-gray-900\">{c.name}</td>\n\n                        {/* Email */}\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">{c.email || '-'}</td>\n\n                        {/* Phone */}\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">{c.phone || '-'}</td>\n\n                        {/* Status */}\n                        <td className=\"px-4 py-3 text-sm\">\n                          {c.latest_log ? (\n                            <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700 border border-emerald-200\">\n                              <CheckCircle className=\"w-3 h-3 mr-1\" />\n                              Contacted\n                            </span>\n                          ) : (\n                            <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200\">\n                              <XCircle className=\"w-3 h-3 mr-1\" />\n                              Not Contacted\n                            </span>\n                          )}\n                        </td>\n\n                        {/* Last Contacted */}\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n                          {c.latest_log ? formatDate(c.latest_log.contacted_at) : '-'}\n                        </td>\n\n                        {/* Contacted By */}\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n                          {c.latest_log?.contacted_by ? (\n                            <span className=\"font-medium text-blue-600\">{c.latest_log.contacted_by}</span>\n                          ) : '-'}\n                        </td>\n\n                        {/* Follow-up Date */}\n                        <td className=\"px-4 py-3 text-sm\">\n                          {c.latest_log?.follow_up_date ? (\n                            <div className={`flex items-center gap-1.5 px-2.5 py-1 rounded-lg ${\n                              isUpcoming(c.latest_log.follow_up_date)\n                                ? 'bg-orange-50 border border-orange-200'\n                                : 'bg-gray-50'\n                            }`}>\n                              <Clock className={`w-3.5 h-3.5 ${isUpcoming(c.latest_log.follow_up_date) ? 'text-orange-500' : 'text-gray-400'}`} />\n                              <span className={`${isUpcoming(c.latest_log.follow_up_date) ? 'text-orange-600 font-medium' : 'text-gray-600'}`}>\n                                {formatDate(c.latest_log.follow_up_date)}\n                              </span>\n                            </div>\n                          ) : '-'}\n                        </td>\n\n                        {/* Notes */}\n                        <td className=\"px-4 py-3 text-sm text-gray-600 max-w-xs\">\n                          {c.latest_log?.notes ? (\n                            <div className=\"truncate italic text-xs bg-blue-50/50 px-2 py-1 rounded\" title={c.latest_log.notes}>\n                              \"{c.latest_log.notes}\"\n                            </div>\n                          ) : '-'}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </motion.div>\n\n      {/* Requirement Form Modal */}\n      <AnimatePresence>\n        {selected && (\n          <RequirementForm\n            contact={selected}\n            onDone={() => {\n              setSelected(null);\n              load();\n              if (onDataChange) onDataChange();\n            }}\n          />\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}