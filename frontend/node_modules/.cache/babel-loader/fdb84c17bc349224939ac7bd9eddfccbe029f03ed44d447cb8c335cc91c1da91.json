{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{motion,AnimatePresence}from'framer-motion';import{Bell,Calendar,User,Phone,Mail,Clock,AlertCircle,CheckCircle,X}from'lucide-react';import API from'../utils/api';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function FollowUps(_ref){let{refreshTrigger,onDataChange,onFollowupsUpdate,showModal,onCloseModal}=_ref;const[followups,setFollowups]=useState([]);const[loading,setLoading]=useState(true);const[showNotification,setShowNotification]=useState(false);const[dueToday,setDueToday]=useState([]);const[completing,setCompleting]=useState(null);const[dismissedForToday,setDismissedForToday]=useState(false);const hasAutoShownRef=useRef(false);// Show modal when requested from parent\nuseEffect(()=>{if(showModal){setShowNotification(true);}},[showModal]);const loadFollowups=async function(){let mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'auto';let showSpinner=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(showSpinner)setLoading(true);try{const[allRes,pendingRes]=await Promise.all([API.get('/contacts/followups/all'),API.get('/contacts/followups/pending')]);setFollowups(allRes.data);setDueToday(pendingRes.data);// Update parent with pending count\nif(onFollowupsUpdate){onFollowupsUpdate(pendingRes.data.length);}// Disabled auto-popup - user must click notification bell to see follow-ups\n// if (\n//   mode === 'auto' &&\n//   pendingRes.data.length > 0 &&\n//   !dismissedForToday &&\n//   !hasAutoShownRef.current\n// ) {\n//   setShowNotification(true);\n//   hasAutoShownRef.current = true;\n// }\n}catch(err){console.error('Error loading follow-ups:',err);}finally{if(showSpinner)setLoading(false);}};// Initialize dismissal state from localStorage on mount\nuseEffect(()=>{const key='followups_notice_dismissed_date';const todayStr=dayjs().format('YYYY-MM-DD');const stored=typeof window!=='undefined'?localStorage.getItem(key):null;setDismissedForToday(stored===todayStr);},[]);// Load followups when component mounts and when refreshTrigger changes.\n// On mount and interval: use 'auto' to allow a single automatic open.\n// On refreshTrigger updates (e.g., after saving): use 'silent' to avoid re-opening.\nuseEffect(()=>{loadFollowups('auto',true);// Check for new follow-ups every 5 minutes (auto mode) - set once on mount\nconst interval=setInterval(()=>loadFollowups('auto',false),5*60*1000);return()=>clearInterval(interval);},[]);useEffect(()=>{if(refreshTrigger!==undefined){loadFollowups('silent',false);}},[refreshTrigger]);const getUrgency=date=>{const today=dayjs().startOf('day');const followUpDate=dayjs(date).startOf('day');if(followUpDate.isBefore(today)){return'high';// Overdue\n}else if(followUpDate.isSame(today)){return'high';// Due today\n}else{const daysUntil=followUpDate.diff(today,'day');if(daysUntil<=3)return'medium';return'low';}};const getUrgencyStyles=urgency=>{switch(urgency){case'high':return'bg-gradient-to-r from-orange-50/70 to-red-50/50 border-orange-200';case'medium':return'bg-gradient-to-r from-yellow-50/70 to-amber-50/50 border-yellow-200';default:return'bg-gradient-to-r from-blue-50/70 to-cyan-50/50 border-blue-200';}};const getUrgencyBadgeStyles=urgency=>{switch(urgency){case'high':return'bg-orange-100/80 text-orange-700 border-orange-300';case'medium':return'bg-yellow-100/80 text-yellow-700 border-yellow-300';default:return'bg-blue-100/80 text-blue-700 border-blue-300';}};const getUrgencyIconColor=urgency=>{switch(urgency){case'high':return'text-orange-500';case'medium':return'text-yellow-500';default:return'text-blue-500';}};const handleComplete=async logId=>{setCompleting(logId);try{await API.patch(\"/contacts/followups/\".concat(logId,\"/complete\"));// Reload follow-ups from server to ensure consistency (silent to avoid popup)\nawait loadFollowups('silent',false);// Notify parent to refresh dashboard\nif(onDataChange){onDataChange();}}catch(err){console.error('Error completing follow-up:',err);alert('Failed to mark follow-up as complete');}finally{setCompleting(null);}};const closeNotificationForToday=()=>{setShowNotification(false);if(onCloseModal)onCloseModal();const key='followups_notice_dismissed_date';const todayStr=dayjs().format('YYYY-MM-DD');try{if(typeof window!=='undefined'){localStorage.setItem(key,todayStr);}}catch(_){}setDismissedForToday(true);};// Only return the modal popup, no main section needed\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(AnimatePresence,{children:showNotification&&dueToday.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:closeNotificationForToday,className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.9,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.9,y:-20},className:\"fixed top-20 left-1/2 -translate-x-1/2 z-50 max-w-md w-full mx-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-500 to-indigo-500 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-2 rounded-lg shadow-sm\",children:/*#__PURE__*/_jsx(Bell,{className:\"w-6 h-6 text-orange-500 animate-bounce\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Follow-up Reminders\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-100\",children:[dueToday.length,\" contact\",dueToday.length>1?'s':'',\" need attention\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:closeNotificationForToday,className:\"text-white hover:bg-white/20 p-2 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto p-4 space-y-3\",children:dueToday.map(followup=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:\"bg-gradient-to-r from-blue-50/70 to-indigo-50/50 border border-blue-200 rounded-lg p-3 hover:shadow-sm transition-all\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-slate-900 text-sm\",children:followup.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 space-y-1 text-xs text-slate-600\",children:[followup.phone&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-3 h-3\"}),followup.phone]}),followup.email&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-3 h-3\"}),followup.email]})]}),followup.notes&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-2 italic bg-white/60 p-2 rounded\",children:[\"\\\"\",followup.notes,\"\\\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full font-medium shadow-sm\",children:dayjs(followup.follow_up_date).isBefore(dayjs(),'day')?'Overdue':'Today'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleComplete(followup.id),disabled:completing===followup.id,className:\"bg-emerald-500 hover:bg-emerald-600 text-white p-1.5 rounded-lg transition-colors disabled:opacity-50 shadow-sm\",title:\"Mark as complete\",children:completing===followup.id?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-3 w-3 border-2 border-white border-t-transparent\"}):/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3\"})})]})]})},followup.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gray-50 border-t border-gray-200\",children:/*#__PURE__*/_jsx(\"button\",{onClick:closeNotificationForToday,className:\"w-full px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all font-medium shadow-sm\",children:\"Got it!\"})})]})})]})})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","motion","AnimatePresence","Bell","Calendar","User","Phone","Mail","Clock","AlertCircle","CheckCircle","X","API","dayjs","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FollowUps","_ref","refreshTrigger","onDataChange","onFollowupsUpdate","showModal","onCloseModal","followups","setFollowups","loading","setLoading","showNotification","setShowNotification","dueToday","setDueToday","completing","setCompleting","dismissedForToday","setDismissedForToday","hasAutoShownRef","loadFollowups","mode","arguments","length","undefined","showSpinner","allRes","pendingRes","Promise","all","get","data","err","console","error","key","todayStr","format","stored","window","localStorage","getItem","interval","setInterval","clearInterval","getUrgency","date","today","startOf","followUpDate","isBefore","isSame","daysUntil","diff","getUrgencyStyles","urgency","getUrgencyBadgeStyles","getUrgencyIconColor","handleComplete","logId","patch","concat","alert","closeNotificationForToday","setItem","_","children","div","initial","opacity","animate","exit","onClick","className","scale","y","map","followup","x","name","phone","email","notes","follow_up_date","id","disabled","title"],"sources":["C:/Users/Sahithi/Desktop/JR Tracker/frontend/src/components/FollowUps.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Bell, Calendar, User, Phone, Mail, Clock, AlertCircle, CheckCircle, X } from 'lucide-react';\nimport API from '../utils/api';\nimport dayjs from 'dayjs';\n\nexport default function FollowUps({ refreshTrigger, onDataChange, onFollowupsUpdate, showModal, onCloseModal }) {\n  const [followups, setFollowups] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showNotification, setShowNotification] = useState(false);\n  const [dueToday, setDueToday] = useState([]);\n  const [completing, setCompleting] = useState(null);\n  const [dismissedForToday, setDismissedForToday] = useState(false);\n  const hasAutoShownRef = useRef(false);\n\n  // Show modal when requested from parent\n  useEffect(() => {\n    if (showModal) {\n      setShowNotification(true);\n    }\n  }, [showModal]);\n\n  const loadFollowups = async (mode = 'auto', showSpinner = false) => {\n    if (showSpinner) setLoading(true);\n    try {\n      const [allRes, pendingRes] = await Promise.all([\n        API.get('/contacts/followups/all'),\n        API.get('/contacts/followups/pending')\n      ]);\n\n      setFollowups(allRes.data);\n      setDueToday(pendingRes.data);\n\n      // Update parent with pending count\n      if (onFollowupsUpdate) {\n        onFollowupsUpdate(pendingRes.data.length);\n      }\n      \n      // Disabled auto-popup - user must click notification bell to see follow-ups\n      // if (\n      //   mode === 'auto' &&\n      //   pendingRes.data.length > 0 &&\n      //   !dismissedForToday &&\n      //   !hasAutoShownRef.current\n      // ) {\n      //   setShowNotification(true);\n      //   hasAutoShownRef.current = true;\n      // }\n    } catch (err) {\n      console.error('Error loading follow-ups:', err);\n    } finally {\n      if (showSpinner) setLoading(false);\n    }\n  };\n\n  // Initialize dismissal state from localStorage on mount\n  useEffect(() => {\n    const key = 'followups_notice_dismissed_date';\n    const todayStr = dayjs().format('YYYY-MM-DD');\n    const stored = typeof window !== 'undefined' ? localStorage.getItem(key) : null;\n    setDismissedForToday(stored === todayStr);\n  }, []);\n\n  // Load followups when component mounts and when refreshTrigger changes.\n  // On mount and interval: use 'auto' to allow a single automatic open.\n  // On refreshTrigger updates (e.g., after saving): use 'silent' to avoid re-opening.\n  useEffect(() => {\n    loadFollowups('auto', true);\n\n    // Check for new follow-ups every 5 minutes (auto mode) - set once on mount\n    const interval = setInterval(() => loadFollowups('auto', false), 5 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  useEffect(() => {\n    if (refreshTrigger !== undefined) {\n      loadFollowups('silent', false);\n    }\n  }, [refreshTrigger]);\n\n  const getUrgency = (date) => {\n    const today = dayjs().startOf('day');\n    const followUpDate = dayjs(date).startOf('day');\n    \n    if (followUpDate.isBefore(today)) {\n      return 'high'; // Overdue\n    } else if (followUpDate.isSame(today)) {\n      return 'high'; // Due today\n    } else {\n      const daysUntil = followUpDate.diff(today, 'day');\n      if (daysUntil <= 3) return 'medium';\n      return 'low';\n    }\n  };\n\n  const getUrgencyStyles = (urgency) => {\n    switch (urgency) {\n      case 'high':\n        return 'bg-gradient-to-r from-orange-50/70 to-red-50/50 border-orange-200';\n      case 'medium':\n        return 'bg-gradient-to-r from-yellow-50/70 to-amber-50/50 border-yellow-200';\n      default:\n        return 'bg-gradient-to-r from-blue-50/70 to-cyan-50/50 border-blue-200';\n    }\n  };\n\n  const getUrgencyBadgeStyles = (urgency) => {\n    switch (urgency) {\n      case 'high':\n        return 'bg-orange-100/80 text-orange-700 border-orange-300';\n      case 'medium':\n        return 'bg-yellow-100/80 text-yellow-700 border-yellow-300';\n      default:\n        return 'bg-blue-100/80 text-blue-700 border-blue-300';\n    }\n  };\n\n  const getUrgencyIconColor = (urgency) => {\n    switch (urgency) {\n      case 'high':\n        return 'text-orange-500';\n      case 'medium':\n        return 'text-yellow-500';\n      default:\n        return 'text-blue-500';\n    }\n  };\n\n  const handleComplete = async (logId) => {\n    setCompleting(logId);\n    try {\n      await API.patch(`/contacts/followups/${logId}/complete`);\n      \n      // Reload follow-ups from server to ensure consistency (silent to avoid popup)\n      await loadFollowups('silent', false);\n      \n      // Notify parent to refresh dashboard\n      if (onDataChange) {\n        onDataChange();\n      }\n    } catch (err) {\n      console.error('Error completing follow-up:', err);\n      alert('Failed to mark follow-up as complete');\n    } finally {\n      setCompleting(null);\n    }\n  };\n\n  const closeNotificationForToday = () => {\n    setShowNotification(false);\n    if (onCloseModal) onCloseModal();\n    const key = 'followups_notice_dismissed_date';\n    const todayStr = dayjs().format('YYYY-MM-DD');\n    try {\n      if (typeof window !== 'undefined') {\n        localStorage.setItem(key, todayStr);\n      }\n    } catch (_) {}\n    setDismissedForToday(true);\n  };\n\n  // Only return the modal popup, no main section needed\n  return (\n    <>\n      {/* Notification Popup for Follow-ups */}\n      <AnimatePresence>\n        {showNotification && dueToday.length > 0 && (\n          <>\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={closeNotificationForToday}\n              className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\n            />\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9, y: -20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.9, y: -20 }}\n              className=\"fixed top-20 left-1/2 -translate-x-1/2 z-50 max-w-md w-full mx-4\"\n            >\n              <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden\">\n                <div className=\"bg-gradient-to-r from-blue-500 to-indigo-500 p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"bg-white p-2 rounded-lg shadow-sm\">\n                        <Bell className=\"w-6 h-6 text-orange-500 animate-bounce\" />\n                      </div>\n                      <div>\n                        <h3 className=\"text-xl font-bold text-white\">Follow-up Reminders</h3>\n                        <p className=\"text-sm text-blue-100\">{dueToday.length} contact{dueToday.length > 1 ? 's' : ''} need attention</p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={closeNotificationForToday}\n                      className=\"text-white hover:bg-white/20 p-2 rounded-lg transition-colors\"\n                    >\n                      <X className=\"w-5 h-5\" />\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"max-h-96 overflow-y-auto p-4 space-y-3\">\n                  {dueToday.map((followup) => (\n                    <motion.div\n                      key={followup.id}\n                      initial={{ opacity: 0, x: -10 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      className=\"bg-gradient-to-r from-blue-50/70 to-indigo-50/50 border border-blue-200 rounded-lg p-3 hover:shadow-sm transition-all\"\n                    >\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-slate-900 text-sm\">{followup.name}</h4>\n                          <div className=\"mt-2 space-y-1 text-xs text-slate-600\">\n                            {followup.phone && (\n                              <div className=\"flex items-center gap-2\">\n                                <Phone className=\"w-3 h-3\" />\n                                {followup.phone}\n                              </div>\n                            )}\n                            {followup.email && (\n                              <div className=\"flex items-center gap-2\">\n                                <Mail className=\"w-3 h-3\" />\n                                {followup.email}\n                              </div>\n                            )}\n                          </div>\n                          {followup.notes && (\n                            <p className=\"text-xs text-gray-500 mt-2 italic bg-white/60 p-2 rounded\">\"{followup.notes}\"</p>\n                          )}\n                        </div>\n                        <div className=\"flex flex-col items-end gap-2\">\n                          <span className=\"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full font-medium shadow-sm\">\n                            {dayjs(followup.follow_up_date).isBefore(dayjs(), 'day') ? 'Overdue' : 'Today'}\n                          </span>\n                          <button\n                            onClick={() => handleComplete(followup.id)}\n                            disabled={completing === followup.id}\n                            className=\"bg-emerald-500 hover:bg-emerald-600 text-white p-1.5 rounded-lg transition-colors disabled:opacity-50 shadow-sm\"\n                            title=\"Mark as complete\"\n                          >\n                            {completing === followup.id ? (\n                              <div className=\"animate-spin rounded-full h-3 w-3 border-2 border-white border-t-transparent\"></div>\n                            ) : (\n                              <CheckCircle className=\"w-3 h-3\" />\n                            )}\n                          </button>\n                        </div>\n                      </div>\n                    </motion.div>\n                  ))}\n                </div>\n\n                <div className=\"p-4 bg-gray-50 border-t border-gray-200\">\n                  <button\n                    onClick={closeNotificationForToday}\n                    className=\"w-full px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all font-medium shadow-sm\"\n                  >\n                    Got it!\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}