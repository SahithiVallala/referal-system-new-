{"ast":null,"code":"import _objectSpread from\"C:/Users/Sahithi/Desktop/JR Tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef}from'react';import{motion,AnimatePresence}from'framer-motion';import{Upload,FileSpreadsheet,X,CheckCircle,AlertCircle,Plus,Trash2,Eye,Users}from'lucide-react';import API from'../utils/api';import QuickAddContact from'./QuickAddContact';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ExcelImport(_ref){let{onComplete}=_ref;const[showOptions,setShowOptions]=useState(false);const[isOpen,setIsOpen]=useState(false);const[isDragging,setIsDragging]=useState(false);const[uploading,setUploading]=useState(false);const[result,setResult]=useState(null);const fileInputRef=useRef(null);const[imports,setImports]=useState([]);const[selectedImport,setSelectedImport]=useState(null);const[importContacts,setImportContacts]=useState([]);const[loadingContacts,setLoadingContacts]=useState(false);const loadImports=async()=>{try{const res=await API.get('/contacts/imports');setImports(res.data);}catch(err){console.error('Error loading imports:',err);}};React.useEffect(()=>{if(isOpen){loadImports();}},[isOpen]);const handleDragOver=e=>{e.preventDefault();setIsDragging(true);};const handleDragLeave=()=>{setIsDragging(false);};const handleDrop=e=>{e.preventDefault();setIsDragging(false);const file=e.dataTransfer.files[0];if(file)uploadFile(file);};const handleFileSelect=e=>{const file=e.target.files[0];if(file)uploadFile(file);};const handleAddMore=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleViewImport=async importItem=>{setSelectedImport(importItem);setLoadingContacts(true);try{const res=await API.get(\"/contacts/imports/\".concat(importItem.id,\"/contacts\"));setImportContacts(res.data);}catch(err){console.error('Error loading contacts:',err);}finally{setLoadingContacts(false);}};const handleDeleteImport=async(id,e)=>{e.stopPropagation();if(!confirm('Delete this import and all its contacts? This cannot be undone.'))return;try{await API.delete(\"/contacts/imports/\".concat(id));await loadImports();if((selectedImport===null||selectedImport===void 0?void 0:selectedImport.id)===id){setSelectedImport(null);setImportContacts([]);}if(onComplete)onComplete();}catch(err){alert('Error deleting import: '+err.message);}};const uploadFile=async file=>{if(!file.name.match(/\\.(xlsx|xls)$/)){setResult({error:'Please select an Excel file (.xlsx or .xls)'});return;}setUploading(true);setResult(null);try{const formData=new FormData();formData.append('file',file);const res=await API.post('/contacts/import',formData,{headers:{'Content-Type':'multipart/form-data'}});setResult(_objectSpread({success:true},res.data));// Reload imports from server\nawait loadImports();setTimeout(()=>{if(onComplete)onComplete();setIsOpen(false);setResult(null);},2000);}catch(err){var _err$response,_err$response$data;setResult({error:((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message});}finally{setUploading(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-8 right-8 z-50\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:showOptions&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20,scale:0.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:0.9},className:\"absolute bottom-20 right-0 bg-white rounded-xl shadow-2xl p-3 space-y-2 min-w-[200px] border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowOptions(false);setIsOpen(true);},className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-blue-50 transition-colors text-left group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 p-2 rounded-lg group-hover:bg-blue-200 transition-colors\",children:/*#__PURE__*/_jsx(FileSpreadsheet,{className:\"w-5 h-5 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-slate-900 text-sm\",children:\"Import Excel\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Bulk upload contacts\"})]})]}),/*#__PURE__*/_jsx(QuickAddContact,{onContactAdded:onComplete})]})}),/*#__PURE__*/_jsxs(motion.button,{whileHover:{scale:1.05,rotate:showOptions?45:0},whileTap:{scale:0.95},onClick:()=>setShowOptions(!showOptions),animate:{rotate:showOptions?45:0},className:\"bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl group\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-6 h-6\"}),!showOptions&&/*#__PURE__*/_jsx(motion.span,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},className:\"absolute right-16 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-1 rounded-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity\",children:\"Add Contacts\"})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:isOpen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>setIsOpen(false),className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.95,y:20},className:\"fixed inset-0 z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(false),className:\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 p-3 rounded-xl\",children:/*#__PURE__*/_jsx(FileSpreadsheet,{className:\"w-6 h-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Import Contacts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Upload Excel file with employee data\"})]}),imports.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddMore,className:\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"Add More\"]})]}),imports.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileSpreadsheet,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-semibold text-gray-800\",children:[\"Imported Excel Sheets (\",imports.length,\")\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-auto space-y-2\",children:imports.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer\",onClick:()=>handleViewImport(item),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-100 p-2 rounded-lg\",children:/*#__PURE__*/_jsx(FileSpreadsheet,{className:\"w-5 h-5 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-gray-900 truncate\",children:item.filename}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mt-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:new Date(item.imported_at).toLocaleString()}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium\",children:[\"+\",item.added_count]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full font-medium\",children:[\"~\",item.skipped_count]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-medium flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-3 h-3\"}),item.contact_count]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewImport(item),className:\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\",title:\"View contacts\",children:/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>handleDeleteImport(item.id,e),className:\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\",title:\"Delete import and contacts\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]},item.id))})]}),/*#__PURE__*/_jsxs(\"div\",{onDragOver:handleDragOver,onDragLeave:handleDragLeave,onDrop:handleDrop,onClick:()=>{var _fileInputRef$current2;return(_fileInputRef$current2=fileInputRef.current)===null||_fileInputRef$current2===void 0?void 0:_fileInputRef$current2.click();},className:\"\\n                    border-2 border-dashed rounded-xl p-12 text-center cursor-pointer\\n                    transition-all duration-200\\n                    \".concat(isDragging?'border-blue-500 bg-blue-50':'border-gray-300 hover:border-blue-400 hover:bg-blue-50/50',\"\\n                  \"),children:[/*#__PURE__*/_jsx(Upload,{className:\"w-12 h-12 mx-auto mb-4 \".concat(isDragging?'text-blue-500':'text-gray-400')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-medium mb-2\",children:isDragging?'Drop file here':'Drag & drop or click to browse'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Excel files (.xlsx, .xls)\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\".xlsx,.xls\",onChange:handleFileSelect,className:\"hidden\"})]}),uploading&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:\"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-3 border-blue-600 border-t-transparent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-900 font-semibold\",children:\"Processing Excel file...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-600 mt-0.5\",children:\"This may take a moment for large datasets\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-blue-200 rounded-full h-2 overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-full rounded-full animate-pulse\",style:{width:'100%'}})})]}),result&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:\"mt-4\",children:result.error?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-red-50 rounded-lg flex items-start gap-3\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-900 font-medium\",children:\"Upload Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700 text-sm mt-1\",children:result.error})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-green-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 mb-3\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"text-green-900 font-medium\",children:\"Import Successful!\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Added\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:result.added||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Skipped\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:result.skipped||0})]})]}),result.errors&&result.errors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 bg-yellow-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-900 text-sm font-medium mb-2\",children:\"Errors:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-xs text-yellow-800 space-y-1\",children:result.errors.map((err,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",err]},i))})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Excel Format:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-xs text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 Column 1: Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-semibold\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 Column 2: Email \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-semibold\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 Column 3: Phone \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-semibold\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 Column 4: Company \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"(Optional)\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 Column 5: Designation \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"(Optional)\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2 italic\",children:\"* Required fields\"})]})]})})]})}),/*#__PURE__*/_jsx(AnimatePresence,{children:selectedImport&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>setSelectedImport(null),className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60]\"}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.95,y:20},className:\"fixed inset-0 z-[60] flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-slate-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 p-3 rounded-xl\",children:/*#__PURE__*/_jsx(FileSpreadsheet,{className:\"w-6 h-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-slate-900\",children:selectedImport.filename}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-500\",children:[\"Imported on \",new Date(selectedImport.imported_at).toLocaleString(),\" \\u2022 \",selectedImport.contact_count,\" contacts\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedImport(null),className:\"text-slate-400 hover:text-slate-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-auto p-6\",children:loadingContacts?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent\"})}):importContacts.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:importContacts.map((contact,index)=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:index*0.02},className:\"bg-slate-50 border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-slate-900\",children:contact.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 space-y-1\",children:[contact.email&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Email:\"}),\" \",contact.email]}),contact.phone&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Phone:\"}),\" \",contact.phone]}),contact.company&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Company:\"}),\" \",contact.company]}),contact.designation&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Designation:\"}),\" \",contact.designation]})]})]})})},contact.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-16 h-16 text-slate-300 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500\",children:\"No contacts found in this import\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-t border-slate-200 bg-slate-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full font-medium\",children:[\"Added: \",selectedImport.added_count]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm bg-amber-50 text-amber-700 px-3 py-1 rounded-full font-medium\",children:[\"Skipped: \",selectedImport.skipped_count]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm bg-slate-100 text-slate-700 px-3 py-1 rounded-full font-medium\",children:[\"Total: \",selectedImport.contact_count]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{handleDeleteImport(selectedImport.id,e);setSelectedImport(null);},className:\"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition-colors font-medium flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"}),\"Delete Import\"]})]})})]})})]})})]});}","map":{"version":3,"names":["React","useState","useRef","motion","AnimatePresence","Upload","FileSpreadsheet","X","CheckCircle","AlertCircle","Plus","Trash2","Eye","Users","API","QuickAddContact","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ExcelImport","_ref","onComplete","showOptions","setShowOptions","isOpen","setIsOpen","isDragging","setIsDragging","uploading","setUploading","result","setResult","fileInputRef","imports","setImports","selectedImport","setSelectedImport","importContacts","setImportContacts","loadingContacts","setLoadingContacts","loadImports","res","get","data","err","console","error","useEffect","handleDragOver","e","preventDefault","handleDragLeave","handleDrop","file","dataTransfer","files","uploadFile","handleFileSelect","target","handleAddMore","_fileInputRef$current","current","click","handleViewImport","importItem","concat","id","handleDeleteImport","stopPropagation","confirm","delete","alert","message","name","match","formData","FormData","append","post","headers","_objectSpread","success","setTimeout","_err$response","_err$response$data","response","children","className","div","initial","opacity","y","scale","animate","exit","onClick","onContactAdded","button","whileHover","rotate","whileTap","span","x","length","map","item","filename","Date","imported_at","toLocaleString","added_count","skipped_count","contact_count","title","onDragOver","onDragLeave","onDrop","_fileInputRef$current2","ref","type","accept","onChange","style","width","added","skipped","errors","i","contact","index","transition","delay","email","phone","company","designation"],"sources":["C:/Users/Sahithi/Desktop/JR Tracker/frontend/src/components/ExcelImport.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Upload, FileSpreadsheet, X, CheckCircle, AlertCircle, Plus, Trash2, Eye, Users } from 'lucide-react';\nimport API from '../utils/api';\nimport QuickAddContact from './QuickAddContact';\n\nexport default function ExcelImport({ onComplete }) {\n  const [showOptions, setShowOptions] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [result, setResult] = useState(null);\n  const fileInputRef = useRef(null);\n  const [imports, setImports] = useState([]);\n  const [selectedImport, setSelectedImport] = useState(null);\n  const [importContacts, setImportContacts] = useState([]);\n  const [loadingContacts, setLoadingContacts] = useState(false);\n\n  const loadImports = async () => {\n    try {\n      const res = await API.get('/contacts/imports');\n      setImports(res.data);\n    } catch (err) {\n      console.error('Error loading imports:', err);\n    }\n  };\n\n  React.useEffect(() => {\n    if (isOpen) {\n      loadImports();\n    }\n  }, [isOpen]);\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = () => {\n    setIsDragging(false);\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const file = e.dataTransfer.files[0];\n    if (file) uploadFile(file);\n  };\n\n  const handleFileSelect = (e) => {\n    const file = e.target.files[0];\n    if (file) uploadFile(file);\n  };\n\n  const handleAddMore = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleViewImport = async (importItem) => {\n    setSelectedImport(importItem);\n    setLoadingContacts(true);\n    try {\n      const res = await API.get(`/contacts/imports/${importItem.id}/contacts`);\n      setImportContacts(res.data);\n    } catch (err) {\n      console.error('Error loading contacts:', err);\n    } finally {\n      setLoadingContacts(false);\n    }\n  };\n\n  const handleDeleteImport = async (id, e) => {\n    e.stopPropagation();\n    if (!confirm('Delete this import and all its contacts? This cannot be undone.')) return;\n    \n    try {\n      await API.delete(`/contacts/imports/${id}`);\n      await loadImports();\n      if (selectedImport?.id === id) {\n        setSelectedImport(null);\n        setImportContacts([]);\n      }\n      if (onComplete) onComplete();\n    } catch (err) {\n      alert('Error deleting import: ' + err.message);\n    }\n  };\n\n  const uploadFile = async (file) => {\n    if (!file.name.match(/\\.(xlsx|xls)$/)) {\n      setResult({ error: 'Please select an Excel file (.xlsx or .xls)' });\n      return;\n    }\n\n    setUploading(true);\n    setResult(null);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      const res = await API.post('/contacts/import', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n\n      setResult({\n        success: true,\n        ...res.data\n      });\n\n      // Reload imports from server\n      await loadImports();\n\n      setTimeout(() => {\n        if (onComplete) onComplete();\n        setIsOpen(false);\n        setResult(null);\n      }, 2000);\n    } catch (err) {\n      setResult({\n        error: err.response?.data?.error || err.message\n      });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <>\n      {/* Floating Action Menu */}\n      <div className=\"fixed bottom-8 right-8 z-50\">\n        {/* Options Menu */}\n        <AnimatePresence>\n          {showOptions && (\n            <motion.div\n              initial={{ opacity: 0, y: 20, scale: 0.9 }}\n              animate={{ opacity: 1, y: 0, scale: 1 }}\n              exit={{ opacity: 0, y: 20, scale: 0.9 }}\n              className=\"absolute bottom-20 right-0 bg-white rounded-xl shadow-2xl p-3 space-y-2 min-w-[200px] border border-slate-200\"\n            >\n              <button\n                onClick={() => {\n                  setShowOptions(false);\n                  setIsOpen(true);\n                }}\n                className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-blue-50 transition-colors text-left group\"\n              >\n                <div className=\"bg-blue-100 p-2 rounded-lg group-hover:bg-blue-200 transition-colors\">\n                  <FileSpreadsheet className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <div>\n                  <p className=\"font-semibold text-slate-900 text-sm\">Import Excel</p>\n                  <p className=\"text-xs text-slate-500\">Bulk upload contacts</p>\n                </div>\n              </button>\n              \n              <QuickAddContact onContactAdded={onComplete} />\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Main FAB Button */}\n        <motion.button\n          whileHover={{ scale: 1.05, rotate: showOptions ? 45 : 0 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => setShowOptions(!showOptions)}\n          animate={{ rotate: showOptions ? 45 : 0 }}\n          className=\"bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl group\"\n        >\n          <Plus className=\"w-6 h-6\" />\n          {!showOptions && (\n            <motion.span\n              initial={{ opacity: 0, x: 10 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"absolute right-16 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-1 rounded-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity\"\n            >\n              Add Contacts\n            </motion.span>\n          )}\n        </motion.button>\n      </div>\n\n      {/* Modal */}\n      <AnimatePresence>\n        {isOpen && (\n          <>\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setIsOpen(false)}\n              className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\n            />\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95, y: 20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.95, y: 20 }}\n              className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n            >\n              <div className=\"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative\">\n                <button\n                  onClick={() => setIsOpen(false)}\n                  className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"bg-blue-100 p-3 rounded-xl\">\n                    <FileSpreadsheet className=\"w-6 h-6 text-blue-600\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Import Contacts</h2>\n                    <p className=\"text-sm text-gray-500\">Upload Excel file with employee data</p>\n                  </div>\n                  {imports.length > 0 && (\n                    <button\n                      onClick={handleAddMore}\n                      className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\n                    >\n                      <Plus className=\"w-5 h-5\" />\n                      Add More\n                    </button>\n                  )}\n                </div>\n\n                {imports.length > 0 && (\n                  <div className=\"mb-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <FileSpreadsheet className=\"w-5 h-5 text-blue-600\" />\n                        <p className=\"text-sm font-semibold text-gray-800\">Imported Excel Sheets ({imports.length})</p>\n                      </div>\n                    </div>\n                    <div className=\"max-h-64 overflow-auto space-y-2\">\n                      {imports.map(item => (\n                        <div \n                          key={item.id} \n                          className=\"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer\"\n                          onClick={() => handleViewImport(item)}\n                        >\n                          <div className=\"flex items-center gap-3 flex-1\">\n                            <div className=\"bg-green-100 p-2 rounded-lg\">\n                              <FileSpreadsheet className=\"w-5 h-5 text-green-600\" />\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"text-sm font-semibold text-gray-900 truncate\">{item.filename}</p>\n                              <div className=\"flex items-center gap-3 mt-1\">\n                                <p className=\"text-xs text-gray-500\">{new Date(item.imported_at).toLocaleString()}</p>\n                                <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium\">+{item.added_count}</span>\n                                <span className=\"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full font-medium\">~{item.skipped_count}</span>\n                                <span className=\"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-medium flex items-center gap-1\">\n                                  <Users className=\"w-3 h-3\" />\n                                  {item.contact_count}\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <button \n                              onClick={() => handleViewImport(item)}\n                              className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                              title=\"View contacts\"\n                            >\n                              <Eye className=\"w-4 h-4\" />\n                            </button>\n                            <button \n                              onClick={(e) => handleDeleteImport(item.id, e)} \n                              className=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                              title=\"Delete import and contacts\"\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Drag & Drop Area */}\n                <div\n                  onDragOver={handleDragOver}\n                  onDragLeave={handleDragLeave}\n                  onDrop={handleDrop}\n                  onClick={() => fileInputRef.current?.click()}\n                  className={`\n                    border-2 border-dashed rounded-xl p-12 text-center cursor-pointer\n                    transition-all duration-200\n                    ${isDragging \n                      ? 'border-blue-500 bg-blue-50' \n                      : 'border-gray-300 hover:border-blue-400 hover:bg-blue-50/50'\n                    }\n                  `}\n                >\n                  <Upload className={`w-12 h-12 mx-auto mb-4 ${isDragging ? 'text-blue-500' : 'text-gray-400'}`} />\n                  <p className=\"text-gray-700 font-medium mb-2\">\n                    {isDragging ? 'Drop file here' : 'Drag & drop or click to browse'}\n                  </p>\n                  <p className=\"text-sm text-gray-500\">Excel files (.xlsx, .xls)</p>\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".xlsx,.xls\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                </div>\n\n                {/* Upload Progress */}\n                {uploading && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200\"\n                  >\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <div className=\"animate-spin rounded-full h-6 w-6 border-3 border-blue-600 border-t-transparent\"></div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-blue-900 font-semibold\">Processing Excel file...</p>\n                        <p className=\"text-xs text-blue-600 mt-0.5\">This may take a moment for large datasets</p>\n                      </div>\n                    </div>\n                    <div className=\"w-full bg-blue-200 rounded-full h-2 overflow-hidden\">\n                      <div className=\"bg-blue-600 h-full rounded-full animate-pulse\" style={{width: '100%'}}></div>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Result Messages */}\n                {result && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"mt-4\"\n                  >\n                    {result.error ? (\n                      <div className=\"p-4 bg-red-50 rounded-lg flex items-start gap-3\">\n                        <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                        <div>\n                          <p className=\"text-red-900 font-medium\">Upload Failed</p>\n                          <p className=\"text-red-700 text-sm mt-1\">{result.error}</p>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"p-4 bg-green-50 rounded-lg\">\n                        <div className=\"flex items-start gap-3 mb-3\">\n                          <CheckCircle className=\"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5\" />\n                          <div>\n                            <p className=\"text-green-900 font-medium\">Import Successful!</p>\n                          </div>\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                          <div className=\"bg-white p-3 rounded-lg\">\n                            <p className=\"text-gray-600\">Added</p>\n                            <p className=\"text-2xl font-bold text-green-600\">{result.added || 0}</p>\n                          </div>\n                          <div className=\"bg-white p-3 rounded-lg\">\n                            <p className=\"text-gray-600\">Skipped</p>\n                            <p className=\"text-2xl font-bold text-yellow-600\">{result.skipped || 0}</p>\n                          </div>\n                        </div>\n                        {result.errors && result.errors.length > 0 && (\n                          <div className=\"mt-3 p-3 bg-yellow-50 rounded-lg\">\n                            <p className=\"text-yellow-900 text-sm font-medium mb-2\">Errors:</p>\n                            <ul className=\"text-xs text-yellow-800 space-y-1\">\n                              {result.errors.map((err, i) => (\n                                <li key={i}>• {err}</li>\n                              ))}\n                            </ul>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </motion.div>\n                )}\n\n                {/* Instructions */}\n                <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\n                  <p className=\"text-sm font-medium text-gray-700 mb-2\">Excel Format:</p>\n                  <ul className=\"text-xs text-gray-600 space-y-1\">\n                    <li>• Column 1: Name <span className=\"text-red-600 font-semibold\">*</span></li>\n                    <li>• Column 2: Email <span className=\"text-red-600 font-semibold\">*</span></li>\n                    <li>• Column 3: Phone <span className=\"text-red-600 font-semibold\">*</span></li>\n                    <li>• Column 4: Company <span className=\"text-gray-400\">(Optional)</span></li>\n                    <li>• Column 5: Designation <span className=\"text-gray-400\">(Optional)</span></li>\n                  </ul>\n                  <p className=\"text-xs text-gray-500 mt-2 italic\">* Required fields</p>\n                </div>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n\n      {/* View Import Contacts Modal */}\n      <AnimatePresence>\n        {selectedImport && (\n          <>\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setSelectedImport(null)}\n              className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60]\"\n            />\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95, y: 20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.95, y: 20 }}\n              className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\"\n            >\n              <div className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col\">\n                <div className=\"p-6 border-b border-slate-200\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"bg-blue-100 p-3 rounded-xl\">\n                        <FileSpreadsheet className=\"w-6 h-6 text-blue-600\" />\n                      </div>\n                      <div>\n                        <h2 className=\"text-2xl font-bold text-slate-900\">{selectedImport.filename}</h2>\n                        <p className=\"text-sm text-slate-500\">\n                          Imported on {new Date(selectedImport.imported_at).toLocaleString()} • {selectedImport.contact_count} contacts\n                        </p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => setSelectedImport(null)}\n                      className=\"text-slate-400 hover:text-slate-600 transition-colors\"\n                    >\n                      <X className=\"w-6 h-6\" />\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"flex-1 overflow-auto p-6\">\n                  {loadingContacts ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                      <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent\"></div>\n                    </div>\n                  ) : importContacts.length > 0 ? (\n                    <div className=\"space-y-2\">\n                      {importContacts.map((contact, index) => (\n                        <motion.div\n                          key={contact.id}\n                          initial={{ opacity: 0, x: -10 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          transition={{ delay: index * 0.02 }}\n                          className=\"bg-slate-50 border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\n                        >\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1\">\n                              <h3 className=\"font-semibold text-slate-900\">{contact.name}</h3>\n                              <div className=\"mt-2 space-y-1\">\n                                {contact.email && (\n                                  <p className=\"text-sm text-slate-600\">\n                                    <span className=\"font-medium\">Email:</span> {contact.email}\n                                  </p>\n                                )}\n                                {contact.phone && (\n                                  <p className=\"text-sm text-slate-600\">\n                                    <span className=\"font-medium\">Phone:</span> {contact.phone}\n                                  </p>\n                                )}\n                                {contact.company && (\n                                  <p className=\"text-sm text-slate-600\">\n                                    <span className=\"font-medium\">Company:</span> {contact.company}\n                                  </p>\n                                )}\n                                {contact.designation && (\n                                  <p className=\"text-sm text-slate-600\">\n                                    <span className=\"font-medium\">Designation:</span> {contact.designation}\n                                  </p>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        </motion.div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-12\">\n                      <Users className=\"w-16 h-16 text-slate-300 mx-auto mb-3\" />\n                      <p className=\"text-slate-500\">No contacts found in this import</p>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"p-6 border-t border-slate-200 bg-slate-50\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-4\">\n                      <span className=\"text-sm bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full font-medium\">\n                        Added: {selectedImport.added_count}\n                      </span>\n                      <span className=\"text-sm bg-amber-50 text-amber-700 px-3 py-1 rounded-full font-medium\">\n                        Skipped: {selectedImport.skipped_count}\n                      </span>\n                      <span className=\"text-sm bg-slate-100 text-slate-700 px-3 py-1 rounded-full font-medium\">\n                        Total: {selectedImport.contact_count}\n                      </span>\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        handleDeleteImport(selectedImport.id, e);\n                        setSelectedImport(null);\n                      }}\n                      className=\"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition-colors font-medium flex items-center gap-2\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                      Delete Import\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}